<script>
  $(function(){
    /*$("#comments_select").change(function(){
      $('#comments_show').submit()
    })*/
     $(".edit_comment").click(function(){
      $(this).parent().find('.update_comment').removeClass("invisible")
      $(this).addClass('invisible')
    })
  })
</script>

<% @comments.each do |comment| %>
  <div class='comment' style="border:1px #ffffff solid;">
        <div class='round'>
      <p ><%= render "authors/avatar", author: comment.author%></p>
    </div>
    <div class="comment-body">
      <%= comment.body %>
    </div>
    <p>
      <b class='username'><%= comment.author.full_name %></b>
    </p>
    <div>
     <i>  updated <%= distance_of_time_in_words(comment.updated_at, Time.now) %> ago</i>
    </div>
          <div class="status">
          <%if comment.created_at < comment.updated_at%><b>edited</b> |<%end%>
          <% less_than_hour = comment.created_at >= 1.hour.ago %>
          <% time = distance_of_time_in_words(comment.created_at, Time.now)%>
        <i> created  <%= time  %> ago</i>
        </div>

        <% if !current_author.nil? && current_author.id == comment.author.id && less_than_hour %>

          <button class='butn edit_comment'>Edit Comment</button>
                 <div class='butn' id="dest">
            <%= link_to 'Destroy Comment', [comment.post, comment],
                      method: :delete,
                      data: { confirm: "Are you sure?" } %>
          </div>
          <h4>Comments: <%= @post.comments.count%></h4>  
          <!--<% if comment.status == 'unpublished' %>
          
            <div class='butn' id="publ">
              <%= link_to 'Publish Comment', publish_post_comment_path(@post.id, comment.id), method: :post %>
            </div>
          <% end %>--> 
          <div class='cont add_comment update_comment invisible'>
            <h4>Edit Comment</h4>
            <%= render 'posts/comment_form', comment: comment%>
          </div>

        <% end %>
      </div>
 </div>
<% end %>